\lecture{34}{4 Apr. 11:00}{Functions of Bounded Variation}
\begin{proof}[Proof of \autoref{prop:FTC-inequality}]
	Let
	\[
		G(x)\coloneqq \begin{dcases}
			F(a), & \text{ if } x < a;          \\
			F(x), & \text{ if } a\leq x\leq b ; \\
			F(b), & \text{ if } x > b .
		\end{dcases}
	\]

	Then \(G\) is increasing. We define
	\[
		g_n(x) = \frac{G(x+1/n)- G(x)}{1/n} \to F^\prime (x)
	\]
	for almost every \(x \in [a,b]\). We note that \(g_n(x) \geq 0\). \autoref{thm:Fatou-lemma} tells us that
	\[
		\int_a^b F^\prime (x) \,\mathrm{d} x = \int_a^b \liminf_{n \to \infty} g_n(x) \,\mathrm{d} x \leq \liminf_{n \to \infty} \int_a^b g_n(x) \,\mathrm{d} x.
	\]
	We then evaluate
	\[
		\begin{split}
			\int_a^b g_n(x) &= n\left( \int_{a+1/n}^{b+1/n} G(x) \,\mathrm{d} x - \int_a^b G(x) \,\mathrm{d} x \right)  \\
			&= n\left( \int_b^{b+1/n} G(x) \,\mathrm{d} x - \int_a^{a+1/n} G(x) \,\mathrm{d} x \right) \\
			&\leq n\left( G\left( b + \frac{1}{n} \right) \cdot \frac{1}{n} - G(a) \cdot \frac{1}{n}  \right)
			= F(b) - F(a).
		\end{split}
	\]
	Therefore,
	\[
		\int_a^b F^\prime (x) \,\mathrm{d} x \leq F(b) - F(a).
	\]
\end{proof}

\section{Functions of Bounded Variation}
\begin{definition}[Total variation function]\label{def:total-variation-function}
	For \(F \colon \mathbb{R} \to \mathbb{R}\), the \emph{total variation function of \(F\)} is \(T_F \colon \mathbb{R} \to [0,\infty]\) defined by
	\[
		T_F(x) = \sup \left\{\sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert \mid n \in \mathbb{\MakeUppercase{n}}, -\infty < x_0 < x_1 < \ldots < x_n = x\right\}.
	\]
\end{definition}

\begin{lemma}\label{lma:lec34-1}
	\(T_F(b)\) is equal to
	\[
		T_F(a) + \sup \left\{\sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert \mid n \in \mathbb{\MakeUppercase{n}}, a = x_0 < x_1 < \ldots < x_n = b\right\}
	\]
	if \(a < b\).
\end{lemma}
\begin{proof}
	The idea is that the sums in the \autoref{def:total-variation} of \(T_F\) are made bigger if the additional subdivision points \(x_{j} \) are added. Hence,
	if \(a <b\), \(T_F(b)\) is unaffected if we assume that \(a\) is always one of the subdivision points.
\end{proof}

\begin{remark}
	\(T_F\) is increasing.
\end{remark}

\begin{definition}[Bounded variation]\label{def:bounded-variation}
	We say that \(F\) is of \emph{\hyperref[def:bounded-variation]{bounded variation}}, denoted as \(F \in BV\), provided that
	\[
		T_F(\infty) = \lim_{x \to \infty} T_F(x) < \infty.
	\]

	Similarly, \(F \in BV([a,b])\) means that
	\[
		\sup \left\{\sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert \mid n \in \mathbb{\MakeUppercase{n}} , a = x_0 < x_1 < \cdots < x_n = b\right\} < \infty.
	\]
\end{definition}

\begin{remark}
	We see the following.
	\begin{enumerate}[(1)]
		\item If \(F\) is of \hyperref[def:bounded-variation]{bounded variation}, then \(F\) is bounded.
		\item \(F(x) = \sin x\) is not of \hyperref[def:bounded-variation]{bounded variation}, but it is of \hyperref[def:bounded-variation]{bounded variation}
		      over any \([a,b]\).
		\item For \(F(x)\) defined as
		      \[
			      F(x) = \begin{dcases}
				      \frac{\sin x}{x}, & \text{ if } x\neq 0 ; \\
				      1,                & \text{ if } x = 0
			      \end{dcases}
		      \]
		      is \underline{not} of \hyperref[def:bounded-variation]{bounded variation} of \([a,b]\) if \(a < 0 < b\) because the harmonic series does not converge.
	\end{enumerate}
\end{remark}

Before we see more properties of \hyperref[def:bounded-variation]{bounded variation} function, we introduce a useful characterization of a function.
\begin{definition}[Lipschitz]\label{def:Lipschitz}
	A function \(F \colon [a,b] \to \mathbb{\MakeUppercase{c}} \) is called \emph{Lipschitz} if there exists an
	\(M \geq 0\) such that
	\[
		\left\vert F(x) - F(y) \right\vert \leq M \left\vert x - y \right\vert.
	\]
\end{definition}

\begin{remark}
	We have the following.
	\begin{enumerate}[(1)]
		\item If \(F,G\) are of \hyperref[def:bounded-variation]{bounded variation}, \(\alpha F + \beta G\) are of \hyperref[def:bounded-variation]{bounded variation}
		      for \(\alpha , \beta \in \mathbb{\MakeUppercase{c}} \).
		\item If \(F\) is increasing and bounded, then \(F\) is a function of \hyperref[def:bounded-variation]{bounded variation}.
		\item If \(F\) is \hyperref[def:Lipschitz]{Lipschitz} on \([a,b]\), then \(F \in BV([a,b])\).
		\item If \(F\) is differentiable, and \(F^\prime\) is bounded on \([a,b]\), then \(F\) is \hyperref[def:Lipschitz]{Lipschitz} from mean value theorem,
		      so it is in \(BV([a,b])\).
	\end{enumerate}
\end{remark}

In particular, we have the following.
\begin{remark}
	If \(F(x) = \int_{-\infty}^x f(t) \,\mathrm{d} t\) for \(f \in L^1(\mathbb{R})\), then \(F \in BV\).
\end{remark}
\begin{explanation}
	We see this by
	\[
		\begin{split}
			\sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert &= \sum_{i=1}^n \left\vert \int_{x_{i-1}}^{x_i} f(t) \,\mathrm{d} t \right\vert
			\leq \sum_{i=1}^n \int_{x_{i-1}}^{x_i} \left\vert f(t) \right\vert \,\mathrm{d} t
			= \int_{x_0}^{x_n} \left\vert f(t) \right\vert \,\mathrm{d} t
			\leq \int_{-\infty}^\infty \left\vert f(t) \right\vert \,\mathrm{d} t,
		\end{split}
	\]
	which is finite since \(f\in L^1(\mathbb{\MakeUppercase{r}} )\).
\end{explanation}

\begin{lemma}\label{lma:lec34-2}
	If \(F \in BV\), then \(T_F\) is bounded, increasing, \(T_F(-\infty) = 0\).
\end{lemma}
\begin{proof}
	Fix \(\epsilon > 0\) and for a \(x\in \mathbb{\MakeUppercase{r}} \), there exists \(x_0 < \ldots < x_n = x \) such that
	\[
		\sum\limits_{i=1}^{n} \left\vert F(x_{j} ) - F(x_{j-1})\right\vert \geq T_{F} (x) - \epsilon.
	\]
	From \autoref{lma:lec34-1}, we see that \(T_{F} (x) - T_{F} (x_0) \geq T_{F} (x) - \epsilon \), and hence
	\(T_{F} (y) \leq \epsilon \) for \(y\leq x_0\), so \(T_{F} (-\infty ) = 0\).
\end{proof}

\begin{lemma}\label{lma:lec34-3}
	\(F \in BV\), then \(T_F \pm F\) are increasing and bounded.
\end{lemma}

\begin{proof}
	Let \(x < y\) and fix \(\epsilon > 0\), then there are points \(x_0 < x_1 < \cdots < x_n = x\) such that
	\[
		T_F(x) \leq \sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert + \epsilon.
	\]
	Furthermore,
	\[
		T_F(y) \geq \sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert + \left\vert F(y) - F(x) \right\vert .
	\]
	Then, since \(\pm(F(y) - F(x)) \leq \left\vert F(y) - F(x) \right\vert \), we have\footnote{To be precise, we note that \(\pm (F(y) - F(x)) \geq - \left\vert F(y) - F(x) \right\vert \) and proceed.}
	\[
		T_F(y) \pm (F(y) - F(x)) \geq \sum_{i=1}^n \left\vert F(x_i) - F(x_{i-1}) \right\vert \geq T_F(x) - \epsilon,
	\]
	hence
	\[
		T_F(y) \pm F(y) \geq T_F(x) \pm F(x) - \epsilon.
	\]
	Taking \(\epsilon \to 0\) yields the result.
\end{proof}

With this, we have the following useful decomposition for any \(F\in BV\).
\begin{definition}[Jordan decomposition]\label{def:Jordan-decomposition}
	For any \(F \in BV\), the \emph{Jordan decomposition of \(F\)} is
	\[
		F = \frac{T_F + F}{2} - \frac{T_F - F}{2},
	\]
	which is a difference of increasing and bounded functions.

	Specifically, we give special names for the terms in the \hyperref[def:Jordan-decomposition]{Jordan decomposition} of \(F\).
	\begin{definition}[Positive variation]\label{def:positive-variation-function}
		The \emph{positive variation of \(F\)} is \(\frac{1}{2}(T_{F} +F)\).
	\end{definition}
	\begin{definition}[Negative variation]\label{def:negative-variation-function}
		The \emph{negative variation of \(F\)} is \(\frac{1}{2}(T_{F} - F)\).
	\end{definition}
\end{definition}
\begin{explanation}
	It's clear that the above decomposition holds, we just need to check that both terms are increasing and bounded functions. They are
	increasing from \autoref{lma:lec34-3}. To show they are bounded, for \(y > x\),
	\[
		T_F(y)\pm F(y) \geq T_F(x) \pm F(x)
	\]
	implies that
	\[
		\left\vert F(y) - F(x) \right\vert \leq T_F(y) - T_{F} (x) \leq T_{F} (\infty ) - T_{F} (-\infty ) < \infty,
	\]
	so that \(F\), and hence \(T_{F} \pm F\) is all bounded.
\end{explanation}

\begin{note}
	Do not be confused between \autoref{def:Jordan-decomposition} and \autoref{thm:Jordan-decomposition-theorem}
	for \hyperref[def:signed-measure]{signed measure}! Also, the \hyperref[def:positive-variation-function]{positive variation of a function}
	and \hyperref[def:positive-variation-measure]{positive variation of a measure} is confusing, same for the negative case.
\end{note}

\begin{theorem}\label{thm:lec-34}
	\(F\) is of \hyperref[def:bounded-variation]{bounded variation} if and only if \(F = F_1 - F_2\) for \(F_1,F_2\) increasing and bounded.
\end{theorem}
\begin{proof}
	The forward implication is given by \autoref{lma:lec34-3} and \hyperref[def:Jordan-decomposition]{the Jordan decomposition}, and the other
	direction is easy to check.\todo{Check!}
\end{proof}

\begin{corollary}
	\(F \in BV\) implies that \(F\) is differentiable \hyperref[def:mu-almost-everywhere]{almost everywhere}. Furthermore,
	\begin{enumerate}[(1)]
		\item \(F(x^+),F(x^-)\) exist for all \(x\) as do \(F(-\infty),F(\infty)\).
		\item The set of discontinuities of \(F\) is countable.
		\item \(G(x) = F(x^+)\) is differentiable and \(G^\prime = F^\prime\) \hyperref[def:mu-almost-everywhere]{almost everywhere}.
		\item \(F^\prime \in L^1(\mathbb{R}, m)\) (i.e. \(F \in L^1_{\operatorname{loc}}(\mathbb{R})\)) for every \(a < b\).
	\end{enumerate}
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}