\lecture{12}{2 Feb. 11:00}{Fatou's Lemma}
We start with a useful corollary.
\begin{corollary}[Tonelli's theorem for nonnegative series and integrals]\label{col:Tonelli-theorem-for-nonnegative-series-and-integrals}
	Given \(g_{n}\geq 0\) for every \(n\in\mathbb{\MakeUppercase{n}} \) and let \(g_{n}\) be \hyperref[def:measurable-function]{measurable}, then
	\[
		\int \sum\limits_{n=1}^{\infty} g_{n} = \sum\limits_{n=1}^{\infty} \int g_{n}.
	\]
\end{corollary}
\begin{proof}
	Let \(f_{N} \coloneqq \sum\limits_{n=1}^{N} g_{n}\) such that \(\lim\limits_{N \to \infty} f_{N} \sum\limits_{n=1}^{\infty} g_{n} \eqqcolon f\), then since \(g_{n}\geq 0\), we have \(0\leq f_{1}\leq f_{2}\leq \ldots  \) with
	\[
		\lim\limits_{N \to \infty} f_{N}(x) = \sum\limits_{n=1}^{\infty} g_{n}(x).
	\]
	By \autoref{thm:MCT}, we have
	\[
		\lim\limits_{N \to \infty} \int \underbrace{\sum\limits_{n=1}^N g_{n}}_{f_{N}} = \int \underbrace{\sum\limits_{n=1}^{\infty} g_{n }}_{f}.
	\]
	Now, since the terms in the limit on the left-hand side is just a finite sum, by \autoref{col:linearity-of-nonnegative-integral}, we have
	\[
		\underbrace{\lim\limits_{N \to \infty} \sum\limits_{n=1}^{N}}_{\sum\limits_{n=1}^{\infty} } \int g_{n} =\lim\limits_{N \to \infty} \int \sum\limits_{n=1}^N g_{n} = \int \sum\limits_{n=1}^{\infty} g_{n},
	\]
	hence
	\[
		\int \sum\limits_{n=1}^{\infty} g_{n} = \sum\limits_{n=1}^{\infty} \int g_{n}.
	\]
\end{proof}
\begin{remark}
	Recall that we have seen \hyperref[thm:Tonelli-theorem-for-series]{two series case} before. We'll later see two integrals cases.
\end{remark}

\begin{theorem}[Fatou's Lemma]\label{thm:Fatou-lemma}
	Suppose \(f_{n}\geq 0\) and \hyperref[def:measurable-function]{measurable}, then
	\[
		\int \liminf_{n \to \infty} f_{n}\leq \liminf_{n \to \infty} \int f_{n}.
	\]
\end{theorem}
\begin{proof}
	Before we start we note the following.
	\begin{remark}
		Recall that
		\[
			\liminf_{n \to \infty} f_{n} \coloneqq \lim\limits_{k \to \infty} \inf_{n\geq k}f_{n} = \sup _{k\in\mathbb{\MakeUppercase{n}} }\inf _{n\geq k}f_{n}
		\]
		and
		\[
			\exists\lim\limits_{n \to \infty} a_{n}\iff \limsup_{n \to \infty} a_{n} = \liminf_{n \to \infty} a_{n}.
		\]
	\end{remark}
	Let \(g_{k} = \inf _{n\geq k}f_{n}\), then \(g_{k}\) is \hyperref[def:measurable-function]{measurable} and \(0\leq g_1 \leq g_2 \leq \ldots  \). Now, from \autoref{thm:MCT}, we have
	\[
		\int \lim\limits_{k \to \infty}  g_{k} = \lim\limits_{k \to \infty} \int g_{k}.
	\]
	Notice that the left-hand side is just \(\int \liminf\limits_{n \to \infty} f_{n}\), while the right-hand side is just \(\lim\limits_{k \to \infty} \int \inf\limits _{n\geq k}f_{n}\),
	i.e.,
	\[
		\int \liminf_{n \to \infty} f_{n} = \lim\limits_{k \to \infty} \int \inf _{n\geq k}f_{n}.
	\]
	We see that we want to take the \(\inf\) outside the integral on the right-hand side. Observe that
	\[
		\underset{m\geq k}{\forall }\ \inf _{n\geq k}f_{n}\leq f _{m} \implies \underset{m\geq k}{\forall }\ \int \inf _{n\geq k}f\leq \int f _{m}\implies \int \inf _{n\geq k}f_{n}\leq \inf_{m\geq k}\int f _{m}.
	\]
	Then, we have
	\[
		\int \liminf_{n \to \infty} f_{n} = \lim\limits_{k \to \infty} \int \inf _{n\geq k}f_{n}\leq \lim\limits_{k \to \infty} \inf _{m\geq k}\int f _{m} = \liminf_{m \to \infty} \int f _{m}.
	\]
\end{proof}
\begin{eg}[Escape to horizontal infinity]
	Given \((\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m)\), let \(f_{n}\coloneqq \mathbbm{1}_{(n, n+1)} \). We immediately see that
	\begin{itemize}
		\item \(f_{n}\to 0\) \hyperref[def:pointwise-convergence]{pointwise}
		\item \(\int f_{n} = 1\) for every \(n\)
		\item \(\int f = 0\)
	\end{itemize}
	From \autoref{thm:Fatou-lemma}, we have a strict inequality
	\[
		0 = \int \liminf_{n \to \infty} f_{n} , \liminf_{n \to \infty} \int f_{n} = 1.
	\]
\end{eg}
\begin{eg}[Escape to width infinity]
	Given \((\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m)\), let \(f_{n}\coloneqq \frac{1}{n}\mathbbm{1}_{(0, n)} \).
\end{eg}
\begin{eg}[Escape to vertical infinity]
	Given \((\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m)\), let \(f_{n}\coloneqq n \mathbbm{1}_{(0, \frac{1}{n})} \).
\end{eg}

\begin{lemma}[Markov's inequiality]\label{lma:Markov-inequality}
	Let \(f\geq 0\) be \hyperref[def:measurable-function]{measurable}. Then
	\[
		\underset{c\in (0, \infty )}{\forall }\ \mu \left(\left\{x  \mid f(x)\geq c\right\}\right)\leq \frac{1}{c}\int f.
	\]
\end{lemma}
\begin{proof}
	Denote \(\left\{x  \mid f(x)\geq c\right\} \eqqcolon E\), then
	\[
		f(x)\geq c \mathbbm{1}_{E}(x) \implies \int f \geq c\int \mathbbm{1}_{E} = c\cdot \mu (E).
	\]
\end{proof}
\begin{remark}
	Notice that \(E = f^{-1} ([c, \infty])\), hence \(E\) is \hyperref[def:measurable-space]{measurable}.
\end{remark}

\begin{proposition}\label{prop:lec12-1}
	Let \(f\geq 0\) be \hyperref[def:measurable-function]{measurable}. Then,
	\[
		\int f = 0 \iff f = 0\ \hyperref[def:mu-almost-everywhere]{a.e.}.
	\]
	i.e.,
	\[
		\int_{}^{} f \,\mathrm{d}\mu = 0 \iff \mu (A) = 0
	\]
	where \(A = \left\{x \mid f(x)>0\right\} = f^{-1} ((0, \infty ])\).
\end{proposition}
\begin{proof}
	Firstly, assume that \(f = \phi \) is a \hyperref[def:simple-function]{simple function}. We may write
	\[
		\phi = \sum\limits_{i=1}^{N} c_{i}\mathbbm{1}_{E_{i}}
	\]
	where \(E_{i}\) are disjoint and \(c_{i}\in(0, \infty )\). Then,
	\[
		\int \phi = \sum\limits_{i=1}^{N} c_{i}\mu (E_{i}) = 0
		\iff \mu (E_1) = \ldots = \mu (E_{N}) = 0
		\iff \mu (A) = 0,\ A = \bigcup\limits_{i=1}^{N} E_{i}.
	\]

	Now, assume that \(f\) is a general function where \(f\geq 0\) is the only constraint, and we consider two cases.
	\begin{itemize}
		\item Assume \(\mu (A) = 0\) (i.e., \(f = 0\) \hyperref[def:mu-almost-everywhere]{a.e.}). Let \(0\leq \phi \leq f\), where \(\phi\) is \hyperref[def:simple-function]{simple}. Then
		      \[
			      \underset{x\in A^{c} }{\forall }\ \phi (x) = 0
		      \]
		      since \(f(x) = 0\), \(\forall x\in A^{c} \). This implies that \(\phi = 0\) \hyperref[def:mu-almost-everywhere]{a.e.} since \(\mu (A) = 0\), so \(\int \phi =0\). We then have
		      \[
			      \int f = 0
		      \]
		      from \autoref{def:generalization-of-integration-of-nonnegative-function}.
		\item Assume \(\int f = 0\). Let \(A_{n} = f^{-1} \left(\left[\frac{1}{n}, \infty \right]\right)\). Then we see that
		      \begin{itemize}
			      \item \(A_1\subset A_2\subset \ldots  \)
			      \item \(\bigcup\limits_{n=1}^{\infty} A_{n} = f^{-1} \left(\bigcup\limits_{n=1}^{\infty} \left[\frac{1}{n}, \infty \right]\right) = f^{-1} ((0, \infty )) = A\).
		      \end{itemize}
		      We then have
		      \[
			      \mu (A_{n}) = \mu \left(\left\{x \mid f(x)\geq \frac{1}{n}\right\}\right) \overset{\hyperref[lma:Markov-inequality]{!}}{\leq }n \int f = 0,
		      \]
		      which further implies
		      \[
			      \mu (A) = \lim\limits_{n \to \infty} \mu (A_{n}) = 0
		      \]
		      from the \hyperref[thm:measure-space-continuity-from-below]{continuity of measure from below}.
	\end{itemize}
\end{proof}

\begin{corollary}
	If \(f, g \geq 0\) are both \hyperref[def:measurable-function]{measurable} and \(f = g\) \hyperref[def:mu-almost-everywhere]{a.e.}, then
	\[
		\int f = \int g.
	\]
\end{corollary}
\begin{proof}
	Let \(A = \left\{x \mid f(x)\neq g(x)\right\}\)\footnote{\(A\) is \hyperref[def:measurable-space]{measurable} indeed.}. Then by assumption, \(\mu (A) = 0\), hence
	\[
		f\mathbbm{1}_{A} = 0\ \hyperref[def:mu-almost-everywhere]{a.e.},\quad g\mathbbm{1}_{A} = 0\ \hyperref[def:mu-almost-everywhere]{a.e.}.
	\]
	This further implies that
	\[
		\begin{split}
			\int f &= \int f(\mathbbm{1}_{A} +\mathbbm{1}_{A^{c}}) \overset{\hyperref[col:linearity-of-nonnegative-integral]{!}}{=} \int f\mathbbm{1}_{A} + \int f\mathbbm{1}_{A^{c} }\\
			&= \int f\mathbbm{1}_{A^{c} } = \int g\mathbbm{1}_{A^{c} } = \int g\mathbbm{1}_{A^{c} }+\int g\mathbbm{1}_{A} = \int g.
		\end{split}
	\]
\end{proof}

\begin{corollary}
	Let \(f_{n}\geq 0\) be \hyperref[def:measurable-function]{measurable}. Then
	\begin{enumerate}[(1)]
		\item \(\begin{rcases}
			      0\leq f_1 \leq f_2 \leq \ldots \leq f\ \hyperref[def:mu-almost-everywhere]{a.e.} \\
			      \lim\limits_{n \to \infty} f_{n} = f\ \hyperref[def:mu-almost-everywhere]{a.e.}
		      \end{rcases} \implies \lim\limits_{n \to \infty} \int f_{n} = \int f\).
		\item \(\lim\limits_{n \to \infty} f_{n} = f\ \hyperref[def:mu-almost-everywhere]{a.e.} \implies \int f \leq \liminf\limits_{n \to \infty} \int f_{n}\).
	\end{enumerate}
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}
\begin{remark}
	Almost all the theorems we've proved can be replaced by theorems dealing with \hyperref[def:mu-almost-everywhere]{almost everywhere} condition.
\end{remark}