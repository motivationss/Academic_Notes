\lecture{38}{13 Apr. 11:00}{Orthonormal Basis}
Let's start with a lemma.
\begin{lemma}[Best approximation]\label{lma:best-approximation}
	Let \(e_1,\ldots,e_N\) be \hyperref[def:orthonormal-set]{orthonormal}, then for \(x \in V\), let \(\alpha_i = \left< x,e_i \right>\), we
	have
	\[
		\left\lVert x - \sum_{i=1}^N \alpha_ie_i\right\rVert \leq \left\lVert x - \sum_{i=1}^N \beta_i e_i\right\rVert
	\]
	for all \(\beta_1,\ldots,\beta_N \in \mathbb{C}\). Namely, \(\sum_{i=1}^{N} \alpha _{i} e_{i} \) is the \emph{best approximation} to \(x\) within
	the span of \(e_1,\ldots,e_N\).
	\begin{note}
		We can also think of it as an \hyperref[def:orthogonal]{orthogonal} projection.
	\end{note}
\end{lemma}
\begin{proof}
	Let \(z = x - \sum_{i=1}^N \alpha_i e_i\), \(w = \sum_{i=1}^N (\alpha_i - \beta_i)e_i\) for any \(\{\beta _i\}\). Note that for all \(n = 1,\ldots,N\), we have
	\[
		\left< z,e_n \right> = \left< x,e_n \right>  - \alpha_n = 0.
	\]
	Thus, \(\left< z,w \right> = 0\). So by the \hyperref[thm:Pythagorean-theorem]{Pythagorean theorem},
	\begin{align*}
		\left\lVert z + w\right\rVert^2 = \left\lVert z\right\rVert^2 + \left\lVert w\right\rVert^2 \geq \left\lVert z\right\rVert^{2} ,
	\end{align*}
	which proves the result.
\end{proof}

\begin{lemma}[Bessel's inequality]\label{lma:Bessel-inequality}
	Let \(\{e_i\}_1^\infty\) be an \hyperref[def:orthonormal-set]{orthonormal set}. For \(x \in V\), let \(\alpha_i = \left< x,e_i \right>\). Then we have
	\[
		\sum\limits_{i=1}^\infty \left\vert \alpha_i \right\vert^2 \leq \left\lVert x\right\rVert^2,
	\]
	which is so-called the \emph{Bessel's inequality}. More generally, we have
	\[
		\left\lVert x\right\rVert^2 = \left\lVert x - \sum\limits_{i=1}^N \alpha_i e_i\right\rVert ^2 + \sum\limits_{i=1}^N \left\vert \alpha_i \right\vert ^2
	\]
	for all \(N \in \mathbb{N}\).
\end{lemma}
\begin{proof}
	We see that
	\[
		\begin{split}
			\left\lVert x - \sum_{i=1}^N \alpha_ie_i\right\rVert^2
			&= \left\lVert x\right\rVert^2 - 2\Re \left< x, \sum_{i=1}^N \alpha_i e_i\right> + \left\lVert \sum_{i=1}^N \alpha_i e_i\right\rVert ^2 \\
			&= \left\lVert x\right\rVert^2 - 2\sum_{i=1}^N \Re \overline{\alpha_i}\left< x,e_i \right> + \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2 \\
			&= \left\lVert x\right\rVert^2 - 2\sum_{i=1}^N \left\vert \alpha_i \right\vert ^2 + \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2 \\
			&= \left\lVert x\right\rVert^2 - \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2.
		\end{split}
	\]
	From this, we see that the inequality holds trivially.
\end{proof}
\begin{remark}
	\autoref{lma:Bessel-inequality} actually holds even for an uncountable collection.
\end{remark}

\begin{definition}[Orthonormal basis]\label{def:orthonormal-basis}
	An \hyperref[def:orthonormal-set]{orthonormal set} \(\{e_i\}\) is said to be an \emph{orthonormal basis} of \(V\) if \(\overline{W} = V\), where
	\[
		W = \left\{\sum_{i=1}^N \beta_i e_i \mid N \in \mathbb{N}, \beta_1,\ldots,\beta_N \in \mathbb{C}\right\}
	\]
	is the subspace of finite linear combinations. In other words, for all \(x \in V\) and for every \(\epsilon > 0\), there exists \(w \in W\) such that \(\left\lVert x - w\right\rVert  < \epsilon \).
\end{definition}

\begin{eg}
	We have the following.
	\begin{enumerate}[(1)]
		\item For \(\mathbb{C}^d\), the \hyperref[def:orthonormal-basis]{orthonormal basis} is \(e_i = (0,\ldots,0,1,0,\ldots,0)\) for \(i = 1,\ldots,d\).
		\item For \(\ell^2\), the \hyperref[def:orthonormal-basis]{orthonormal basis} is the countably many \(e_i = (0,\ldots,0,1,0,\ldots)\) for \(i \in \mathbb{N}\).
	\end{enumerate}
\end{eg}

\begin{definition}[Hilbert Space]\label{def:Hilbert-space}
	A \emph{Hilbert space} is a \hyperref[def:complete]{complete} \hyperref[def:inner-product]{inner product} space.
\end{definition}
\begin{note}
	Namely, a \hyperref[def:Hilbert-space]{Hilbert space} is a \hyperref[def:Banach-space]{Banach space} with an \hyperref[def:inner-product]{inner product}.
\end{note}

\begin{eg}
	\(\mathbb{R}^d\), \(\mathbb{C}^d\), \(L^2(X,\mathcal{A},\mu)\), \(\ell^2\) are all \hyperref[def:Hilbert-space]{Hilbert spaces}.
\end{eg}

\begin{eg}
	\(C([0,1]) \subseteq L^2(X,\mathcal{A},\mu)\) is \textbf{not} a \hyperref[def:Hilbert-space]{Hilbert space}.
\end{eg}
\begin{explanation}
	We see this by the fact that it is not \hyperref[def:complete]{complete}. Take a function \(f_n\) so that \(f_n\) is zero from \(0\) to \(1/2\)
	and \(1\) from \(1/2 + 1/n\) to \(1\), connected continuously by a line. We then see that \(f_{n}\) is \hyperref[def:Cauchy-sequence]{Cauchy},
	but its natural limit is discontinuous.
\end{explanation}

\begin{theorem}\label{thm:lec-38}
	Let \(\mathcal{H}\) be a \hyperref[def:Hilbert-space]{Hilbert space}. Let \(\{e_i\}_{i=1}^\infty\) be an \hyperref[def:orthonormal-set]{orthonormal set}. The following are equivalent.
	\begin{enumerate}[(1)]
		\item \(\{e_i\}_{i=1}^\infty\) is an \hyperref[def:orthonormal-basis]{orthonormal basis}.
		\item If \(x \in \mathcal{H}\) and \(\left< x,e_i \right> = 0\) for all \(i\), then \(x = 0\).
		\item If \(x \in \mathcal{H}\), then \(s_N \coloneqq \sum_{i=1}^N \alpha_i e_i \to x\) \hyperref[def:strong-convergence]{strongly} where \(\alpha_i = \left< x,e_i \right>\).
		\item If \(x \in \mathcal{H}\), then \(\left\lVert x\right\rVert^2 = \sum_{i=1}^\infty \left\vert \alpha_i \right\vert ^2\).
	\end{enumerate}
\end{theorem}

\begin{proof}
	We prove this as follows.
	\begin{claim}
		\((3)\implies(4)\).
	\end{claim}
	\begin{explanation}
		From \autoref{lma:Bessel-inequality}, we have
		\[
			\left\lVert x\right\rVert^2 = \left\lVert x - s_N\right\rVert^2 + \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2.
		\]

		Taking \(N \to \infty\) and noting \hyperref[def:strong-convergence]{\(s_N \to x\) strongly} gives
		\[
			\left\lVert x\right\rVert^2 = \lim_{N \to \infty} \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2 = \sum_{i=1}^\infty \left\vert \alpha_i \right\vert ^2.
		\]
	\end{explanation}

	\begin{claim}
		\((4)\implies (1)\).
	\end{claim}
	\begin{explanation}
		Using the same equality from \autoref{lma:Bessel-inequality}, we have \(\left\lVert x\right\rVert^2 = \left\lVert x - s_N\right\rVert^2 + \sum_{i=1}^N \left\vert \alpha_i \right\vert ^2\).
		Now, take \(N \to \infty\) yields \(\left\lVert x - s_N\right\rVert^2 \to 0\) so \(\left\lVert x - s_N\right\rVert \to 0\).
		Therefore, \hyperref[def:strong-convergence]{\(s_N \to x\) strongly}, yielding that \(x\) can be approximated by finite linear combinations as desired.
	\end{explanation}
	\begin{claim}
		\((1) \implies (2)\).
	\end{claim}
	\begin{explanation}
		Fix \(x \in \mathcal{H}\), and fix \(\epsilon > 0\). Then by (1), there exists a \(y = \sum_{i=1}^k \beta_i e_i\) such that \(\left\lVert x - y\right\rVert < \epsilon\).

		By the \hyperref[lma:best-approximation]{best approximation lemma}, \(\left\lVert x - s_k\right\rVert \leq \left\lVert x - y\right\rVert < \epsilon \).
		If \(\left< x,e_i \right> = 0\) for all \(i\), then \(s_k = 0\), so \(\left\lVert x\right\rVert < \epsilon \).
		Taking \(\epsilon \to 0\) would yield \(\left\lVert x\right\rVert = 0\), implying \(x = 0\).
	\end{explanation}

	\begin{claim}
		\((2)\implies (3)\).
	\end{claim}
	\begin{explanation}
		\hyperref[lma:Bessel-inequality]{Bessel's inequality} gives
		\[
			\sum_{i=1}^\infty \left\vert \alpha_i \right\vert ^2 \leq \left\lVert x\right\rVert^2 < \infty.
		\]

		We now see that for \(N > M\),
		\[
			\left\lVert s_N - s_M\right\rVert^2 = \left\lVert x \sum_{i=M + 1}^N \alpha_i e_i\right\rVert x ^2 = \sum_{i=M+1}^N \left\vert \alpha_i \right\vert ^2 \to 0
		\]
		as \(N > M \to \infty\), by convergence of the series. This implies that \(\{s_N\}_{N=1}^\infty\) is a \hyperref[def:Cauchy-sequence]{Cauchy sequence} in \(\mathcal{H}\).
		Since \(\mathcal{H}\) is \hyperref[def:complete]{complete}, there is a vector \(y\) such that \hyperref[def:strong-convergence]{\(s_N \to y\) strongly}.
		\begin{problem}
		Is \(y = x\)?
		\end{problem}
		\begin{answer}
			Fix \(i \in \mathbb{N}\), consider \(\left< y-x, e_i \right>\). We see that
			\[
				\left< y-x,e_i \right> = \left< y-s_N,e_i \right> + \left< s_N - x, e_i \right>.
			\]
			We can compute that for \(N > i\), that
			\[
				\left< s_N - x, e_i \right> = \alpha_i - \left< x,e_i \right>  = 0.
			\]
			Hence, \(\left< y -x,e_i \right> = \left< y-s_N,e_i \right>\). Because \hyperref[lma:strong-convergence-implies-weak-convergence]{strong convergence implies weak convergence},
			taking \(N \to \infty\) yields that \(\left< y-x,e_i \right> = 0\) for all \(i \in \mathbb{N}\). Therefore, by the assumption of (2), \(y -x = 0\), so \(x = y\) and we're done.
		\end{answer}
	\end{explanation}
\end{proof}
\begin{remark}
	Note that we did not use the \hyperref[def:Hilbert-space]{Hilbert space} properties for everything except \((2)\implies(3)\).
	When \(\mathcal{H}\) is replaced by any \hyperref[def:inner-product]{inner product} space \(V\) we only have
	\[
		(3) \implies (4) \implies (1) \implies (2).
	\]
\end{remark}
\begin{note}[Planchenel identity]\label{note:Planchenel-identity}
	The (4) in \autoref{thm:lec-38} is called the \emph{Planchenel identity}.
\end{note}

\begin{definition}[Separable]\label{def:separable}
	A \hyperref[def:metric]{metric} space is called \emph{separable} if there exists a countable dense subset.
\end{definition}

\begin{eg}
	\(\mathbb{R}^d \supseteq \mathbb{\MakeUppercase{q}} ^d\) and \(\ell^p\) with \(1 \leq p < \infty\) are all \hyperref[def:separable]{separable},
	but not for \(p = \infty\).
\end{eg}
\begin{explanation}
	To do this, consider sequences of rational numbers.
\end{explanation}
\begin{eg}
	\(L^p(\mathbb{R},m)\) is \hyperref[def:separable]{separable} for \(1 \leq p < \infty\).
\end{eg}
\begin{explanation}
	Take \hyperref[def:step-function]{step functions} with rational heights and rational endpoints to intervals.
\end{explanation}
\begin{theorem}
	Every \hyperref[def:separable]{separable} \hyperref[def:Hilbert-space]{Hilbert space} has a countable \hyperref[def:orthonormal-basis]{orthonormal basis}.
\end{theorem}
\begin{proof}
	Gram-Schmidt algorithm\footnote{\url{https://en.wikipedia.org/wiki/Gram-Schmidt_process}} will construct such an \hyperref[def:orthonormal-basis]{orthonormal basis}
	explicitly.
\end{proof}

\begin{note}[Dimension of a Hilbert space]
	The cardinality of an \hyperref[def:orthonormal-basis]{orthonormal basis} is determined by the space, and we can call this the \emph{dimension} of a
	\hyperref[def:Hilbert-space]{Hilbert space}.
\end{note}
